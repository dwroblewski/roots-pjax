/**
 * Roots PJAX
 * WordPress meets HTML5 Boilerplate, Bootstrap, and PJAX
 * https://github.com/wayoutmind/roots-pjax
 */(function(e){e(document).ready(function(){Modernizr.history&&(e("a:not(:has(img))").pjax("#wrap"),e.ajaxPrefilter(function(e,t,n){n.url=t.url}),e(document).bind("pjax:beforeSend",function(t,n){var r=new XMLHttpRequest;r.open("HEAD",n.url,!1),r.setRequestHeader("X-PJAX",!0),r.send();var i=r.getResponseHeader("Content-Type").indexOf("text/html")!==-1,s=r.getResponseHeader("X-PJAX")!=="false";if(i&&s){var o=["current-menu-item","current-menu-parent","current-menu-ancestor","current_page_item","current_page_parent","current_page_ancestor","active active","active"].join(" ");return e(".active").removeClass(o),e(t.relatedTarget).parent().addClass("active"),!0}n.abort(),window.location.href=n.url}),e(document).bind("pjax:start",function(){e(this).ajaxSuccess(function(t,n,r){var i=n.getResponseHeader("X-WordPress-Body-Class");e(this).attr("class",i);var s={canonical:n.getResponseHeader("X-WordPress-Link-Canonical"),previous:n.getResponseHeader("X-WordPress-Link-Previous"),next:n.getResponseHeader("X-WordPress-Link-Next")},o={previous:n.getResponseHeader("X-WordPress-Title-Previous"),next:n.getResponseHeader("X-WordPress-Title-Next")};e('link[rel="canonical"]').attr("href",s.canonical),e('link[rel="prev"]').attr("href",s.previous),e('link[rel="prev"]').attr("title",o.previous),e('link[rel="prev"]').length===0&&e("head").append('<link rel="previous" title="'+o.previous+'" href="'+s.previous+'" />'),e('link[rel="next"]').attr("href",s.next),e('link[rel="next"]').attr("title",o.next),e('link[rel="next"]').length===0&&e("head").append('<link rel="previous" title="'+o.next+'" href="'+s.next+'" />');var u={children:e.makeArray(e("head").children()).map(function(e){return e.outerHTML.replace(/'/g,'"')}),nodes:n.getResponseHeader("X-WordPress-Head").split("|").map(function(e){return e.replace(/'/g,'"')}).filter(function(e){return e!==""})};for(var a=0;a<u.nodes.length;a++)u.children.indexOf(u.nodes[a])===-1&&e("head").append(u.nodes[a]);var f={children:e.makeArray(e("body").children("link, script")).map(function(e){return e.outerHTML.replace(/'/g,'"')}),nodes:n.getResponseHeader("X-WordPress-Footer").split("|").map(function(e){return e.replace(/'/g,'"')}).filter(function(e){return e!==""})};for(var a=0;a<f.nodes.length;a++)f.children.indexOf(f.nodes[a])===-1&&e("body").append(f.nodes[a])})}))})})(jQuery);
